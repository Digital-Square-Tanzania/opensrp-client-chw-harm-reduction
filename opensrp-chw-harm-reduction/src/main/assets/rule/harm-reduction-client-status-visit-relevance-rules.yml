---
name: step1_substance_use_methods_other_specify
description: Show substance_use_methods_other_specify when its condition is met
priority: 1
condition: "(step1_client_status == 'new' || step1_client_status == 'continue_service') && step1_substance_use_methods != null && step1_substance_use_methods.contains('other')"
actions:
  - "isRelevant = true"
---
name: step1_pregnancy_breastfeeding_status
description: Show pregnancy_breastfeeding_status when its condition is met
priority: 1
condition: "global_sex == 'female' && (step1_client_status == 'new' || step1_client_status == 'continue_service')"
actions:
  - "isRelevant = true"
---
name: step1_substance_use_methods
description: Show substance_use_methods when its condition is met
priority: 1
condition: "step1_client_status == 'new' || step1_client_status == 'continue_service'"
actions:
  - "isRelevant = true"
---
name: step1_substances_used_injecting_only
description: Show substances_used_injecting_only when its condition is met
priority: 1
condition: "(step1_client_status == 'new' || step1_client_status == 'continue_service') && step1_substance_use_methods != null && step1_substance_use_methods.contains('injecting') && !(step1_substance_use_methods.contains('smoking') || step1_substance_use_methods.contains('drinking') || step1_substance_use_methods.contains('sniffing') || step1_substance_use_methods.contains('other'))"
actions:
  - "isRelevant = true"
---
name: step1_substances_used_non_injecting_only
description: Show substances_used_non_injecting_only when its condition is met
priority: 1
condition: "(step1_client_status == 'new' || step1_client_status == 'continue_service') && step1_substance_use_methods != null && !step1_substance_use_methods.contains('injecting')"
actions:
  - "isRelevant = true"
---
name: step1_substances_used_all
description: Show substances_used_all when its condition is met
priority: 1
condition: "(step1_client_status == 'new' || step1_client_status == 'continue_service') && step1_substance_use_methods != null && step1_substance_use_methods.contains('injecting') && (step1_substance_use_methods.contains('smoking') || step1_substance_use_methods.contains('drinking') || step1_substance_use_methods.contains('sniffing') || step1_substance_use_methods.contains('other'))"
actions:
  - "isRelevant = true"
---
name: step1_substances_used
description: Calculate substances_used from selected method-specific fields
priority: 1
condition: "step1_client_status == 'new' || step1_client_status == 'continue_service'"
actions:
  - "calculation = (step1_substance_use_methods != null && step1_substance_use_methods.contains('injecting') && !(step1_substance_use_methods.contains('smoking') || step1_substance_use_methods.contains('drinking') || step1_substance_use_methods.contains('sniffing') || step1_substance_use_methods.contains('other'))) ? step1_substances_used_injecting_only : (step1_substance_use_methods != null && !step1_substance_use_methods.contains('injecting')) ? step1_substances_used_non_injecting_only : (step1_substance_use_methods != null && step1_substance_use_methods.contains('injecting') && (step1_substance_use_methods.contains('smoking') || step1_substance_use_methods.contains('drinking') || step1_substance_use_methods.contains('sniffing') || step1_substance_use_methods.contains('other'))) ? step1_substances_used_all : null"
---
name: step1_substances_used_other_specify
description: Show substances_used_other_specify when its condition is met
priority: 1
condition: "(step1_client_status == 'new' || step1_client_status == 'continue_service') && step1_substances_used != null && step1_substances_used.contains('other')"
actions:
  - "isRelevant = true"
---
name: step1_risky_behaviours_injecting_only
description: Show risky_behaviours_injecting_only when its condition is met
priority: 1
condition: "(step1_client_status == 'new' || step1_client_status == 'continue_service') && step1_substance_use_methods != null && step1_substance_use_methods.contains('injecting')"
actions:
  - "isRelevant = true"
---
name: step1_risky_behaviours_non_injecting_only
description: Show risky_behaviours_non_injecting_only when its condition is met
priority: 1
condition: "(step1_client_status == 'new' || step1_client_status == 'continue_service') && step1_substance_use_methods != null && !step1_substance_use_methods.contains('injecting')"
actions:
  - "isRelevant = true"
---
name: step1_risky_behaviours
description: Calculate risky_behaviours from method-specific fields
priority: 1
condition: "step1_client_status == 'new' || step1_client_status == 'continue_service'"
actions:
  - "calculation = (step1_substance_use_methods != null && step1_substance_use_methods.contains('injecting')) ? step1_risky_behaviours_injecting_only : (step1_substance_use_methods != null && !step1_substance_use_methods.contains('injecting')) ? step1_risky_behaviours_non_injecting_only : null"
---
name: step1_risky_behaviours_other_specify
description: Show risky_behaviours_other_specify when its condition is met
priority: 1
condition: "(step1_client_status == 'new' || step1_client_status == 'continue_service') && step1_risky_behaviours != null && step1_risky_behaviours.contains('other')"
actions:
  - "isRelevant = true"
---
name: step1_is_idu
description: Calculate is_idu from substance_use_methods
priority: 1
condition: "step1_client_status == 'new' || step1_client_status == 'continue_service'"
actions:
  - "calculation = (step1_substance_use_methods != null && step1_substance_use_methods.contains('injecting')) ? 'yes' : 'no'"
